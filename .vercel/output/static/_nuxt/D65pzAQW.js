var X=Object.defineProperty;var Y=(a,e,t)=>e in a?X(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var d=(a,e,t)=>Y(a,typeof e!="symbol"?e+"":e,t);import{bR as O,cn as k,aW as F,b9 as J,bg as Z,aC as ee,aM as te,bF as ae,aK as z,co as se,bl as re,a5 as ne,a6 as oe,y as _,bi as x,cp as ie,aU as le,cq as ce,Q as ue,cr as fe,cs as A,ct as I,o as L,c as U,a as pe,aw as R,G as de,c9 as q,bQ as me}from"./BOpmARXq.js";import{P as V}from"./Caf5MzTi.js";const he=a=>a==="defer"||a===!1;function G(...a){var o;const e=typeof a[a.length-1]=="string"?a.pop():void 0;typeof a[0]!="string"&&a.unshift(e);let[t,n,r={}]=a;if(typeof t!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof n!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const s=O(),p=n,y=()=>k.value,b=()=>s.isHydrating?s.payload.data[t]:s.static.data[t];r.server=r.server??!0,r.default=r.default??y,r.getCachedData=r.getCachedData??b,r.lazy=r.lazy??!1,r.immediate=r.immediate??!0,r.deep=r.deep??k.deep,r.dedupe=r.dedupe??"cancel";const h=r.getCachedData(t,s),g=h!=null;if(!s._asyncData[t]||!r.immediate){(o=s.payload._errors)[t]??(o[t]=k.errorValue);const i=r.deep?F:J;s._asyncData[t]={data:i(g?h:r.default()),pending:F(!g),error:Z(s.payload._errors,t),status:F("idle"),_default:r.default}}const l={...s._asyncData[t]};delete l._default,l.refresh=l.execute=(i={})=>{if(s._asyncDataPromises[t]){if(he(i.dedupe??r.dedupe))return s._asyncDataPromises[t];s._asyncDataPromises[t].cancelled=!0}if(i._initial||s.isHydrating&&i._initial!==!1){const f=i._initial?h:r.getCachedData(t,s);if(f!=null)return Promise.resolve(f)}l.pending.value=!0,l.status.value="pending";const c=new Promise((f,u)=>{try{f(p(s))}catch(v){u(v)}}).then(async f=>{if(c.cancelled)return s._asyncDataPromises[t];let u=f;r.transform&&(u=await r.transform(f)),r.pick&&(u=ve(u,r.pick)),s.payload.data[t]=u,l.data.value=u,l.error.value=k.errorValue,l.status.value="success"}).catch(f=>{if(c.cancelled)return s._asyncDataPromises[t];l.error.value=se(f),l.data.value=re(r.default()),l.status.value="error"}).finally(()=>{c.cancelled||(l.pending.value=!1,delete s._asyncDataPromises[t])});return s._asyncDataPromises[t]=c,s._asyncDataPromises[t]},l.clear=()=>ye(s,t);const w=()=>l.refresh({_initial:!0}),P=r.server!==!1&&s.payload.serverRendered;{const i=ne();if(i&&!i._nuxtOnBeforeMountCbs){i._nuxtOnBeforeMountCbs=[];const u=i._nuxtOnBeforeMountCbs;ee(()=>{u.forEach(v=>{v()}),u.splice(0,u.length)}),te(()=>u.splice(0,u.length))}P&&s.isHydrating&&(l.error.value||h!=null)?(l.pending.value=!1,l.status.value=l.error.value?"error":"success"):i&&(s.payload.serverRendered&&s.isHydrating||r.lazy)&&r.immediate?i._nuxtOnBeforeMountCbs.push(w):r.immediate&&w();const c=oe();if(r.watch){const u=ae(r.watch,()=>l.refresh());c&&z(u)}const f=s.hook("app:data:refresh",async u=>{(!u||u.includes(t))&&await l.refresh()});c&&z(f)}const D=Promise.resolve(s._asyncDataPromises[t]).then(()=>l);return Object.assign(D,l),D}function ye(a,e){e in a.payload.data&&(a.payload.data[e]=void 0),e in a.payload._errors&&(a.payload._errors[e]=k.errorValue),a._asyncData[e]&&(a._asyncData[e].data.value=void 0,a._asyncData[e].error.value=k.errorValue,a._asyncData[e].pending.value=!1,a._asyncData[e].status.value="idle"),e in a._asyncDataPromises&&(a._asyncDataPromises[e]&&(a._asyncDataPromises[e].cancelled=!0),a._asyncDataPromises[e]=void 0)}function ve(a,e){const t={};for(const n of e)t[n]=a[n];return t}function ge(a,e,t){const[n={},r]=typeof e=="string"?[{},e]:[e,t],s=_(()=>x(a)),p=n.key||ie([r,typeof s.value=="string"?s.value:"",..._e(n)]);if(!p||typeof p!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+p);const y=p===r?"$f"+p:p;if(!n.baseURL&&typeof s.value=="string"&&s.value[0]==="/"&&s.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:b,lazy:h,default:g,transform:l,pick:w,watch:P,immediate:D,getCachedData:o,deep:i,dedupe:c,...f}=n,u=le({...ce,...f,cache:typeof n.cache=="boolean"?void 0:n.cache}),v={server:b,lazy:h,default:g,transform:l,pick:w,immediate:D,getCachedData:o,deep:i,dedupe:c,watch:P===!1?[]:[u,s,...P||[]]};let m;return G(y,()=>{var C;(C=m==null?void 0:m.abort)==null||C.call(m,new DOMException("Request aborted as another request to the same endpoint was initiated.","AbortError")),m=typeof AbortController<"u"?new AbortController:{};const $=x(n.timeout);let S;return $&&(S=setTimeout(()=>m.abort(new DOMException("Request aborted due to timeout.","AbortError")),$),m.signal.onabort=()=>clearTimeout(S)),(n.$fetch||globalThis.$fetch)(s.value,{signal:m.signal,...u}).finally(()=>{clearTimeout(S)})},v)}function _e(a){var t;const e=[((t=x(a.method))==null?void 0:t.toUpperCase())||"GET",x(a.baseURL)];for(const n of[a.params||a.query]){const r=x(n);if(!r)continue;const s={};for(const[p,y]of Object.entries(r))s[x(p)]=x(y);e.push(s)}return e}function be(a){const e={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};return a.size!==e.size||a.x!==e.x||a.y!==e.y||a.rotate!==e.rotate||a.flipX||a.flipY}const we={key:0,style:{display:"none"}},Pe=["innerHTML"],De=["innerHTML"],Ee=ue({__name:"icon",props:{border:{type:Boolean,default:!1},fixedWidth:{type:Boolean,default:!1},flip:{type:[Boolean,String],default:!1,validator:a=>[!0,!1,"horizontal","vertical","both"].includes(a)},icon:{type:[Object,Array,String],required:!0},mask:{type:[Object,Array,String],default:null},maskId:{type:String,default:void 0},listItem:{type:Boolean,default:!1},pull:{type:String,default:void 0,validator:a=>["right","left"].includes(a)},pulse:{type:Boolean,default:!1},rotation:{type:[String,Number],default:void 0,validator:a=>[90,180,270].includes(Number.parseInt(a,10))},swapOpacity:{type:Boolean,default:!1},size:{type:String,default:void 0,validator:a=>["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].includes(a)},spin:{type:Boolean,default:!1},transform:{type:[String,Object],default:void 0},symbol:{type:[Boolean,String],default:!1},title:{type:String,default:void 0},titleId:{type:String,default:void 0},inverse:{type:Boolean,default:!1},bounce:{type:Boolean,default:!1},shake:{type:Boolean,default:!1},beat:{type:Boolean,default:!1},fade:{type:Boolean,default:!1},beatFade:{type:Boolean,default:!1},spinPulse:{type:Boolean,default:!1},spinReverse:{type:Boolean,default:!1}},setup(a){const e=a,t=_(()=>l(e.icon)),n=_(()=>l(e.mask)),r=_(()=>{if(e.transform){const o=typeof e.transform!="object"?fe.transform(e.transform):e.transform;if(o&&be(o))return w(o)}}),s=_(()=>A(t.value,{classes:h.value,title:e.title,titleId:e.titleId})),p=_(()=>A(n.value)),y=_(()=>{var i,c,f,u,v,m;const o={"aria-hidden":!0,"data-prefix":(i=s.value)==null?void 0:i.prefix,"data-icon":(c=s.value)==null?void 0:c.iconName,class:h.value,focusable:!1,role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${(f=s.value)==null?void 0:f.icon[0]} ${(u=s.value)==null?void 0:u.icon[1]}`};return e.symbol&&(o.id=[(v=s.value)==null?void 0:v.prefix,"fa",(m=s.value)==null?void 0:m.iconName].join("-")),e.title&&(o["aria-labelledby"]=g.value),o}),b=_(()=>{const o=D();if(p.value){const i=e.maskId||p.value.iconName;return`<defs>
      <clipPath id="clip-${i}">
        <path fill="currentColor" d="${p.value.icon[4]}"></path>
      </clipPath>
      <mask id="mask-${i}" x="0" y="0" width="100%" height="100%" maskUnits="userSpaceOnUse" maskContentUnits="userSpaceOnUse">
        <rect x="0" y="0" width="100%" height="100%" fill="white"></rect>
        ${o}
      </mask>
    </defs>
    <rect fill="currentColor" clip-path="url(#clip-${i})" mask="url(#mask-${i})" x="0" y="0" width="100%" height="100%"></rect>`}return o}),h=_(()=>{const o={"fa-spin":e.spin,"fa-pulse":e.pulse,"fa-fw":e.fixedWidth,"fa-border":e.border,"fa-li":e.listItem,"fa-inverse":e.inverse,"fa-flip":e.flip===!0,"fa-flip-horizontal":e.flip==="horizontal"||e.flip==="both","fa-flip-vertical":e.flip==="vertical"||e.flip==="both",[`fa-${e.size}`]:e.size!==void 0,[`fa-rotate-${e.rotation}`]:e.rotation!==void 0,[`fa-pull-${e.pull}`]:e.pull!==void 0,"fa-swap-opacity":e.swapOpacity,"fa-bounce":e.bounce,"fa-shake":e.shake,"fa-beat":e.beat,"fa-fade":e.fade,"fa-beat-fade":e.beatFade,"fa-spin-pulse":e.spinPulse,"fa-spin-reverse":e.spinReverse},i=Object.keys(o).map(c=>o[c]?c:null).filter(c=>c);return[I.replacementClass,...i]}),g=_(()=>I.replacementClass+"-title-"+(e.titleId||P()));function l(o){if(o){if(typeof o=="string"){const i={solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab"};let c=i[I.styleDefault]||"fas",f=o.replace(/\bfa-/g,"");if(f.includes(" ")){const u=f.split(/\s+/);u[0]in i&&(c=i[u[0]]),f=u[1]}return{prefix:c,iconName:f}}if(Array.isArray(o)&&o.length===2)return{prefix:o[0],iconName:o[1]};if(typeof o=="object"&&"prefix"in o&&"iconName"in o)return o}}function w(o){var E;const c=((E=s.value)==null?void 0:E.icon[0])||512,f=o.x||0,u=o.y||0,v=o.size||0,m=o.rotate||0,T=o.flipX||0,$=o.flipY||0,S="translate(".concat(String(512/2)," 256)"),N="translate(".concat(String(f*32),", ").concat(String(u*32),") "),C="scale(".concat(String(v/16*(T?-1:1)),", ").concat(String(v/16*($?-1:1)),") "),H="rotate(".concat(String(m)," 0 0)"),Q="".concat(N," ").concat(C," ").concat(H),K="translate(".concat(String(c/2*-1)," -256)");return{outer:S,inner:Q,path:K}}function P(){const o="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";let i=12,c="";for(;i-- >0;)c+=o[Math.random()*62|0];return c}function D(){const o=p.value?"black":"currentColor",i=[];let c=s.value.icon[4];return Array.isArray(c)||(c=[c]),c.forEach(f=>{i.push(`<path fill="${o}"${r.value?' transform="'+r.value.path+'"':""} d="${f}"></path>`)}),r.value&&(i.unshift(`<g transform="${r.value.outer}">`,`<g transform="${r.value.inner}">`),i.push("</g>","</g>")),e.title&&i.unshift(`<title id="${g.value}">${e.title}</title>`),i.join("")}return e.icon&&!s.value&&console.info("Could not find main icon",t.value),e.mask&&!p.value&&console.info("Could not find mask icon",n.value),(o,i)=>s.value&&a.symbol?(L(),U("svg",we,[pe("symbol",R(y.value,{innerHTML:b.value}),null,16,Pe)])):s.value?(L(),U("svg",R({key:1},y.value,{innerHTML:b.value}),null,16,De)):de("",!0)}});function xe(a,e){return ge(a,{...e,$fetch:O().$api},"$uv0kGgft5L")}function j(a,e){const t=a,r=O().$api;return r(t,{...e,baseURL:q().public.apiBaseUrl})}function ke(a){return G(a,()=>$fetch(a,{baseURL:q().public.apiBaseUrl}),"$3KV1NXeSSW")}const M=()=>({fetchProperties:async r=>{try{return await j("/properties/landing",{params:{...r,property_status:"active"}})}catch(s){throw s instanceof Error?new Error(s.message):new Error(String(s))}},fetchPropertiesWithFilters:async r=>{try{return await j("/properties/landing",{method:"GET",params:{...r,property_status:"active"}})}catch(s){throw s instanceof Error?new Error(s.message):new Error(String(s))}},fetchPropertyById:async r=>{const{data:s,error:p}=await ke(`/properties/${r}`);if(p.value)throw new Error(p.value.message);return s.value},fetchPicklists:async()=>{const{data:r,error:s}=await xe("/properties/picklists");if(s.value)throw new Error(s.value.message);return r.value}}),Se=()=>({mapGeneralData:e=>({management:e.management,saleValue:e.sale_value||null,rentValue:e.rent_value||null,feeValue:e.fee_value||null,condition:e.property_condition,bedrooms:e.bedrooms,bathrooms:e.bathrooms,garage:e.garage,stratum:e.stratum,floor:e.floor,totalArea:e.total_area,videoUrl:e.video_url,video360Url:e.video_360_url})}),$e=()=>({mapLocation:e=>({stateName:e.state_name,cityName:e.city_name,zoneName:e.zone_name,address:e.address,latitude:e.latitude,longitude:e.longitude})}),Ce=()=>{const a=n=>({internalFeatures:t(n.internal_features),externalFeatures:t(n.external_features)}),e=n=>({id:n.id||null,label:n.name||"",value:n.value||""}),t=n=>n.map(r=>e(r));return{mapFeatures:a}},{mapGeneralData:Be}=Se(),{mapLocation:Fe}=$e(),{mapFeatures:Ie}=Ce(),W=()=>{const a=t=>({id:t.property_id,name:t.general_data.property_name,advisorPhoneNumber:t.advisor_phone_number,description:t.description.description,generalData:Be(t.general_data),location:Fe(t.location),features:Ie(t.features),images:t.images});return{mapProperty:a,mapProperties:t=>t.map(a)}},Me=()=>{const a=n=>({propertyType:t(n.property_type),status:t(n.status),management:t(n.management),condition:t(n.condition),rentType:t(n.rent_type),areaUnits:t(n.area_units),features:{internalFeatures:t(n.features.internal_features),externalFeatures:t(n.features.external_features)}}),e=n=>({id:n.id||null,label:n.name||"",value:n.value||""}),t=n=>n.map(r=>e(r));return{mapPicklists:a}};class B{constructor(e,t){d(this,"skip");d(this,"limit",20);d(this,"property_name");d(this,"property_management");d(this,"property_type");d(this,"rent_value_from");d(this,"rent_value_to");d(this,"sale_value_from");d(this,"sale_value_to");d(this,"area_from");d(this,"area_to");d(this,"bedrooms");d(this,"bathrooms");d(this,"garages");d(this,"property_status");d(this,"internal_features");d(this,"external_features");const{page:n,propertyName:r,propertyManagement:s,propertyType:p,valueFrom:y,valueTo:b,bedrooms:h,bathrooms:g,garages:l,totalAreaFrom:w,totalAreaTo:P,internalFeatures:D,externalFeatures:o}=e;this.skip=this.setSkip(n||1),r&&(this.property_name=r),w&&(this.area_from=Number(w)),P&&(this.area_to=Number(P)),y&&this.setValueFrom(s,Number(y)),b&&this.setValueTo(s,Number(b)),s&&(this.property_management=this.setPropertyManagement(s,t)),p&&(this.property_type=this.setArrayOfIds(p)),D&&(this.internal_features=this.setArrayOfIds(D)),o&&(this.external_features=this.setArrayOfIds(o)),h&&(this.bedrooms=this.setQuantityArray(h)),g&&(this.bathrooms=this.setQuantityArray(g)),l&&(this.garages=this.setQuantityArray(l))}static create(e,t){return new B(e,t)}setSkip(e){return e===1?0:(e-1)*this.limit}setPropertyManagement(e,t){var r;return(r=t.management.find(s=>s.label.toLowerCase()===e.toLowerCase()))==null?void 0:r.value}setValueFrom(e,t){if(e===V.RENT){this.rent_value_from=t;return}this.sale_value_from=t}setValueTo(e,t){if(e===V.RENT){this.rent_value_to=t;return}this.sale_value_to=t}setArrayOfIds(e){return e.map(t=>t.id)}setQuantityArray(e){return e.map(t=>Number(t.value))}}const ze=me("properties",{state:()=>({properties:[],picklists:{},filters:{},page:1,itemsPerPage:20,totalItems:0}),actions:{async getProperties(){const{fetchProperties:a}=M(),{mapProperties:e}=W(),t=B.create({propertyManagement:this.filters.propertyManagement},this.picklists),n=await a(t);this.properties=e(n.data),this.totalItems=n.total},async getPropertiesWithFilters(){const{fetchPropertiesWithFilters:a}=M(),{mapProperties:e}=W(),t=B.create({...this.filters,page:this.page},this.picklists),n=await a(t);this.properties=e(n.data),this.totalItems=n.total},async getPicklists(){const{fetchPicklists:a}=M(),{mapPicklists:e}=Me(),t=await a();this.picklists=e(t)},resetFilters(){this.filters={}}}});export{Ee as _,W as a,ze as b,M as u};
